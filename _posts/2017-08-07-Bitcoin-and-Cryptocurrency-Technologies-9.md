---
layout: post
title: 《比特币与加密货币技术9》：比特币平台
categories: geek
mathjax: true
---

### 9.1 比特币作为一个只能被添加的记录

比特币记录只能添加不能删除，次序由哈希指针确定，不可更改，比时间戳更准确。<!-- more -->

安全时间戳：

1. 时间点T公布哈希函数$$H(r|x)$$
2. 再之后的某个时间点公布r和x

可以用于证明创意的优先性，或是证明其他人收到过我们发给他们的信息（借助共同签名）。注意仅仅通过时间戳无法证明对未来的准确预测（可以分支攻击）。

在报纸等媒体上刊登广告是一种低科技含量的安全事件戳。可以通过比特币实现：

1. 往哈希函数值打钱（缺点是会产生永不被利用的比特币）
2. 承诺币：将数据编码进私钥，生成对于的公钥交易（计算复杂）
3. 使用不能被再次使用的输出OP_RETURN（花费变成了交易费，可以使用梅克尔树封装大量时间戳数据）

理论上我们可以把任何数据写进比特币区块，可以据此开发依附于比特币的附着币，实现更加复杂的功能，比如合约币就是其中一种，不需要建立新的共识机制，但是需要验证区块链的历史记录，不能实现轻钱包。

### 9.2 比特币作为一个“智能资产”

比特币不具有可互换性，而具有可追溯性。因此，可以赋予比特币其它的意义，添加元数据。纸币由于唯一编号的存在，也是可以在上面添加元数据的，比如指定编号的纸币作为体育赛事的门票等。比特币同样可以实现类似功能。

比特币可以实现染色币方案，通过P2SH地址，实现所谓的开放资产，经这个地址转账出来的币被赋予一定的颜色。染色币交易必须嵌入一个有特殊标记的支出，矿工不会验证染色的有效性，因此需要全节点钱包自行验证。染色币可以用于发现公司股票，关联房产与汽车，或者登记域名所有权等。

### 9.3 多方参与的安全博彩系统

这是一个多方安全计算的典型案例。

1. 第一回合，参与者公布哈希函数H(x) H(y)H(z)；
2. 第二回合，参与者公布x y z,输出(x+y+z)%3作为博彩结果

为了公平性，强制参与者都会在第二回合公布数字，可以使用比特币的定时交易特性，构建一笔定时保证金，这笔保证金只可以通过披露随机数字才能赎回。对于n个玩家，需要建立$$n^2$$个约定对。

### 9.4 比特币作为一个公共的随机源

即使一个过程是真正随机的，但公众可能并不信任它。因此一个好的密码学随机信号塔需要：

1. 以固定的频率产生随机数
2. 可以方便的进行观测，且没有误差
3. 不能被利益相关者操纵

比特币的Hash值的获取需要一个随机数，这些随机数由分布式的算力产生，因此可以作为公共随机源，它的安全性是可以用币价来衡量的，只有当作弊的收益大于产生区块的收益时，矿工才可能为了选取随机数而丢弃到手的比特币区块。如果在比特币脚本语言中加入读取随机码的操作，则可以将比特币脚本直接用于抽奖。

### 9.5 预测市场和真实世界的数据源

预测市场通过分布式的共识来对未来的事件进行预测，实践证明往往比专家预测还准确。如何建立一个去中心化的预测市场：

1. 搜集和发放资金
2. 需要一个方法确保执行正确金额的资金发放
3. 需要一个去中心化的仲裁机构
4. 去中心化的下单登记系统

专用于预测市场的“未来币”设计，支持这些新的交易类型：

1. 创造一个新的预测，明确仲裁者和参数
2. 为每个未来币的结果购买一份赌注
3. 将赌注转化为未来币
4. 将每个未来币的结果兑现赌注
5. 通过将特定情境的押注所得转入一个新完成的未来币，并注销所有其他情形的赌注，来结束特定预测市场

现实世界中对事实的认定可能很复杂很困难，因此仲裁是个社会问题，通过技术手段时无法完美解决的。扩展虚拟货币的功能来宣告现实社会里的事实，我们称之为实时数据供给。现实密钥：仲裁者制作出一对密钥，分别代表是否，预先公布公钥，当事实揭晓时，公布其中一个私钥，其他人可以据此通过联合签名构建赌局。

一个简单的建立去中心化委托交易的方法是，将预先交易作为特性，让矿工赚取交易委托间的差价，这样的问题是报价者会变得无比谨慎。