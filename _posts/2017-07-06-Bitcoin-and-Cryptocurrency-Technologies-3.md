---
layout: post
title: 《比特币与加密货币技术3》：比特币的运行机制
categories: geek
mathjax: true
---

### 3.1 比特币的交易

比特币的交易过程就是不停的创造区块的过程。比特币并不是以账户为核心的系统，而是以交易为核心的系统，那些在交易输出中没有再作为输入的数额，是控制这个输出地址的人可以支配的，而每一次交易，一定要把所有输入的比特币花光。

如果不是恰好能花光，则会出现自己转账给自己的情况，但是这里的地址并不是同一个地址，而只是被同一个人控制而已。这种情况叫地址转换。

再核查交易的有效性时，只需要核查至该交易的输入引用的输出即可，所以核查很快。

可以使用一个新的地址合并自己的比特币，可以两个人共同支付到同一个地址（这两者其实是一样的）。

**交易语法** 一个比特币的交易分为三部分：

* 元数据：包括交易的规模，输入输出的数量，交易的哈希值，以及锁定时间。
* 输入：每个输入包括之前那笔交易的哈希值，输出索引以及签名（实际上也是脚本）。
* 输出：每个输出包括金额以及比特币脚本。输出总和小于等于输入总和。


### 3.2 比特币的脚本

