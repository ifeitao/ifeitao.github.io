---
layout: post
title: 《比特币与加密货币技术6》：比特币和匿名性
categories: geek
mathjax: true
---

### 6.1 匿名的基础知识

化名：在交易的时候不需要使用真实的姓名。

匿名：在交易的时候完全不使用任何名字。

比特币不需要使用真实的姓名，但是需要使用公钥哈希值作为交易标识，因此属于化名而不是匿名。

在计算机科学中，匿名指的是无关联性，意味着如果一个用户和系统重复进行交互，从特定攻击者的角度考虑，不同的交互行为之间应该无法互相关联。

区块链技术是一种公开的账本系统，所如果比特币地址管理到真实身份，那么隐私泄露比传统的货币系统甚至更严重。

旁路攻击：因为侧面渠道或者一些间接的信息泄露，你的匿名身份也可能会被暴露。

无关联性：

1. 同一个用户的不同地址应该不易关联。
2. 同一个用户的不同交易应该不易关联。
3. 一个交易的双方应该不易关联。（间接迂回交易）

匿名集：交易匿名集是指攻击者无法把特定交易从其中分辨出来的交易集合。这是一种有限度的无关联性。

污点分析：如果地址S发出的比特币总是地址R接收，那么不管是直接抵达，还是经过了多少中间地址，S和R则被定义为具有高分污点。

为什么需要匿名性？

1. 降低公开区块链所带来的信息暴露风险；
2. 从技术上实现任何人不能轻易追踪参与者。

我们用道德标准分辨出的好坏，对计算机而言，是无法区分的，因此匿名机制的设计无法区分好坏。

匿名化与去中心化存在一定的矛盾。

### 6.2 如何对比特币去匿名化

多地址输入交易：共同输入大体上意味着共同控制，据此可以建立一个地址簇。

钱包软件缺陷：总是把存放零钱的地址放在第一个。

惯用法则：零钱地址总是新地址，非零钱地址通常都不是新地址。

如何给地址簇打标签：利用实际的交易打标签。

#### 辨识个人

1. 直接交易
2. 通过服务提供商
3. 疏忽（论坛公布地址）

以上基于对区块链网络上交易图谱进行的分析称为交易图谱分析。此外，还可能通过网络层去匿名化。

第一个通知交易的节点很可能就是交易源头。因此在交易中可能暴露IP地址。这类问题可以哦太难过传统的匿名网络如Tor解决。

### 6.3 混币

混币：使用中介每天实现匿名化。

混币在线钱包：在线钱包提供了一定的混币效果，但是内部保留了记录，这些记录可能暴露而导致去匿名。这种匿名与传统银行类似，都有一个知道所有用户的交易记录的中央媒介，但是对于一个没有特权信息的陌生人来说，有了一定的匿名性。

专项混币服务：保证不留记录，不需要身份验证，只需要发送比特币到服务商地址，并告诉交易服务商你发送的比特币所需要达到的地址。

混币准则：

1. 多重混币的使用（一环套一环）
2. 一致性交易（交易价值一致）
3. 客户端自动化（消除交易时间因素等）
4. 手续费应该是要么全有要么全无

### 6.4 分布式混币

合币：不同的用户共同创建一个单一的比特币交易，该交易包含所有的用户输入。步骤：

1. 找到想要混币的交易对手，作为节点。
2. 交换输入/输出地址。
3. 建立交易。
4. 发送这个交易给其他人，每一个节点在确认他们的输出地址之后，进行签名。
5. 广播这个交易。

合并规避：通过允许接收方提供多个输出地址的方式，使得无关联性成为可能。可以帮助用户在高风险交易流（具有重复性的转账模式，如发工资）的情形下重获无关联性。

### 6.5 零币和零钞

#### 1 零币

基础币是一种类似于比特币的另类币，而零币是这种数字货币的一种延伸，基础币和零币之间可以来回转换。基础币是进行交易的货币，而零币只是提供了一种交易基础币的机制，确保新币和旧币之间毫无联系。使用密码学的方式来保证，每一个证明只能赎回一个基础币。

零币使用的核心加密工具是零知识验证，这种方式可以证明一个声明是正确的，而不需要展示可推导改声明正确性的任何其他信息。

**铸造零币**

1. 生成一个序列号S和一个随机密钥r。
2. 计算一个函数Commit(S, r)，则是序列号S的承诺。
3. 在区块链上发布该承诺，这需要消耗一个基础币，此币不可再被花费，进而创建了一个零币。此时S和r仍然是保密的。

**赎回**

1. 创建一个特殊的花费交易，这个交易包含序列号S和一个具备零知识验证的声明：我知道承诺对象(S, r)中的r在以下的集合里 $${c_1, c_2,...,c_n}$$。
2. 矿工将会验证你的零知识验证，这将给予你打开区块链中一个零币承诺的能力，而你并不需要真的打开它。
3. 矿工也会插叙序列号S，确保这个零币没有在之前的花费交易中被使用过。
4. 你的会费交易的输出将形成一个新的零币，你应使用你所拥有的一个地址来作为输出地址。

用于搭建零币的工具RSA累加器徐娅一次性信任设置：一个被信任方需要选择两个很大的质数p和q，并且公示N=pxq作为所有人在系统的整个生命周期中使用的参数。

#### 2 零钞

零钞是一种不同的匿名性加密货币，使用zkSNARKS的密码学技术，所有的交易都可以以零知识验证的方式进行，账本公开的唯一内容就是交易的存在性，以及矿工们用来验证系统正常运行所需要的关键属性的证明。建立零钞系统的问题是需要一个很大的公开参数集（超过1G），如果任何人知道了这些秘密输入，就会产生无法监测 的双重消费问题。