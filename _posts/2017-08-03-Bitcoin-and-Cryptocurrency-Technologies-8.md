---
layout: post
title: 《比特币与加密货币技术8》：其他挖矿算法
categories: geek
mathjax: true
---

### 8.1 算法的基本要求

1. 可以调整的难度：解密难度可以随着新加入用户而增大的哈希算力得到调整。
2. 快速验证
3. 无关过程的属性：在任意单位时间找到一个谜底的成功率，大致要与所贡献的哈希算力成比例。

### 8.2 反ASIC解密算法

一个CPU一票。

反ASIC：设计一个解密程序，尽可能的减少最有效率的定制运算设备与通用电脑之间的效率差距。

刚性内存解密：解密需要大量的内存来计算，而不是靠大量的CPU时间。

内存限制解密：

刚性内存解密算法：Scypt算法

```
def scrypt(N, seed):
	V = [0] * N
// 以下为虚拟随机数填充	
V[0] = seed
for i = 1 to N:
	V[i] = SHA-256(V[i-1]) 
//
X = SHA-256(V[N-1])
for i = 1 to N:
	j = X % N
	X = SHA-256(X ^ V[j])
	
	return X
```

该算法依然可以只缓存一部分数据（每K个数据缓存一个），而使用更多的CPU计算来权衡。Scypt算法的缺点是校验成本较大，所以实际的莱特币虽然使用了该算法，但是只使用了128KB内存，所以依然出现了ASIC。

需要设计一个解密程序在计算上时刚性内存的，又可以很快的进行校验。杜鹃鸟周期算法或许是可行的。

其他抵抗ASIC的方法：X11（使用一系列的哈希函数，依然可以ASIC化），使用移动的目标值作为挖矿解谜（谁来确定目标值？）。

ASIC蜜月：如果某种数字货币真的有较高的价值，必然会出现专用设备，没有出现可能只是因为没人愿意投入资本研究。

对抵抗AISIC的争论：ASIC挖矿其实带来了网络的稳定性，攻击者必须拥有专门挖矿的硬件，如果它不参与这个生态，则投入会很高，如果参与了这个生态，则失去了攻击的好处。（不能自己砸自己的饭碗。）

### 8.3 有效工作量证明

比特币挖矿的能耗是一种负外部性。

如何让挖矿变得有其他价值？它相比类似SETI@home的项目，还需要

1. 机会均等的解密区域
2. 永不枯涸的解密库
3. 通过算法自动生成

寻找梅森素数：缺乏可调节的难度特性。

质数币：为质数寻找坎宁安链：$$k$$个质数的序列$$P_1,P_2,...,P_k$$,以使得$$P_k=2P_{k-1}+1$$。对于一个给定的解密挑战x（上一个区块的哈希函数值），选择x上的前m位数，任何长度大于等于k的答案是正确的，这条链上的第一个质数是一个n位质数并且和x一样有m位的首段数据。增加k的值（链长）使得问题难度指数增加，增加n的值使得问题难度线性增长。

永久币和存储量证明：初始化时使用一个有价值的大文件，挖矿计算时需要这个文件的子集。

1. 构建一个梅克尔树，每个叶子节点都是文件片段；
2. 生成一个签名公钥，据此确定一个文件片段的子集合；
3. 挖矿时：
   1. 选择一个随机数nonce
   2. h1 :=H(prev || mrkl_root || PK || nonce)
   3. h1从子集中选择k个片段
   4. h2 := H(prev || mrkl_root || PK || nonce || F) 其中F为上述片段
   5. h2< TARGET表示计算正确

### 8.4 不能外包的解密算法

目标是防止矿工组织形成中心化的矿池。

矿池存在的技术特征：

1. 一个矿工很容易通过提交工分来证明（概率上）他所做的的工作量；
2. 矿池成员可以容易地向管理员证明，他们遵守规则并且可以通过实际运算来寻找有效区块，然后矿池会作为一个整体接受奖励。

“区块丢弃”攻击：提交工分但是丢弃有效区块，一般来说这是损人不利己的。但是如果两个矿池A、B各有50%，如果A动用25%的算力攻击，则可以获得5/9的所有奖励。这种攻击只存在于理论上。

奖励破坏：解密目标变成：找到一个区块，这个区块里的数字签名的哈希值低于一个特定的目标，因此解密需要知道私钥。矿池管理员如果分发私钥，则矿工可能挪走资金，而自己代表矿工签名则承担了大部分计算工作，还不如全部自己来。

不能外包的挖矿会导致波动风险很大，可能导致更多的中心化。

设计一个共识协议，理想方案时小额度的奖励每个找到低等难度解密的矿工，以自然的降低概率波动风险。但是这样需要降低难度1000倍以上，会导致区块高度很高，而且要做到在不需要瞬时广播所有解密结果的情况下，让解密结果变得更容易。

### 8.5 权益证明和虚拟挖矿

虚拟挖矿把挖矿设备和能耗这一环节省去，设计一个投票系统，选票是由每个人所拥有的当前币量所决定的。

虚拟挖矿大大减少比特币对环境的影响，它不能把能耗降到零（需要网络通信验证或者少量挖矿算力），也阻止了ASIC问题。

点点币是第一个使用权益证明的另类币。它是工作证明和权益证明的一种混合体。拥有量以币龄（输出的币量和输出里还没有使用的区块数量的乘积）为计价单位。可以通过特殊的币拥有量交易将币龄设为零，交易中消耗的币龄决定了工作量证明中解密运算的难度。

权益证明：使那些拥有大量币控制权的矿工挖矿更容易。

储量证明：矿工铸币时，冻结一定数量的区块，收入来自因为不能使用货币去做其他事情的机会成本。

一个矿工可以即在当前最长的区块链上挖矿，同时又可以尝试创建一个分叉。大多数的虚拟挖矿都积极的使用检查点来防御分叉攻击。

虚拟挖矿可能产生蓄力行为，囤积一定的币量后再进行分叉。虚拟挖矿中，51%优势容易扩大成100%优势。

虚拟挖矿没有真正的能源消耗，是否真的具有安全性？

