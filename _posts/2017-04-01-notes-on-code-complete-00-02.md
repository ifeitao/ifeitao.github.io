---
layout: post
title:  代码大全笔记00~02
categories: coding
---
## 0 FAQ

### 什么是代码大全？

是一本书，讲的是如何写代码，与具体的编程语言无关，而是以方法论为主，很厚，九百多页的砖头。

2008年的时候，我在成都某新华书店第一次看到一本叫《代码大全》的书，我还以为是一本摘抄了各种代码的类似《食谱大全》的书，因此都懒得去翻开看一下，因为觉得抄代码有互联网就足够了，这件事可能说明了两个问题：

- “代码大全”这个书名翻译得太烂；
- 我当年很无知。

《Code Complete》实在是应该翻译为《代码完成》比较合适，据第二版的译者说，因为第一版翻译为《代码大全》，他们也只好将错就错。市面上的计算机类书籍汗牛充栋，大多是针对具体编程语言的，要不就是讲需求分析、软件设计、软件测试，直接讲软件构建的书反而很少，很多人比如我也学了一些软件工程的皮毛，但是代码写出来还是不忍卒读，用本书的观点来说，只有软件构建——直白一点说叫写代码，才是一个程序员才会确实去做的事，至于其他部分，往往都伴随着谎言。

俗话说“走都不会走，还想学跑？”，一个程序员，先老老实实把自己写代码的水平提高，实在是最基本也最重要的，在学校教育经历中，一般人写的都是“一次运行，用完就扔”的学生代码，与做软件产品的要求相距甚远，而这本书，在教你怎么把代码写好这方面，真是事无巨细，处处闪耀着真知灼见，从这个角度来看，叫它大全，也不为错。比如我的编程入门教材是谭浩强的《C程序设计》，里面的变量命名风格是abcd风格，而本书则花了一章来讲变量名的问题，对于abcd门派出来的人，实在是一剂良药。

### 为什么会有这个笔记？

为了多消化吸收一点。

### 为什么要放到网上？

为了督促自己把书读完，笔记写完，如果能对其他人有帮助，那算是意外收获。

### 中文版还是英文版好？

某种程度上这是一个伪问题，能读完学到东西最好，我为了提高一下英语水平，啃的是英文版。所以，我的笔记的中文是自己翻译的，有错误欢迎指正，概不负责。

## 第一部分 打下基础

第一部分讲的是在坐下了敲代码之前要搞清楚的一些事情，以我有限的开发经验来看，需求分析的重要性怎么强调都不为过，这本书的重点不在这里，但还是得上来先磨刀再砍柴。

## 第1章 欢迎来到软件构建

### 1.1 什么是软件构建？

因为读书少，软件构建(Software Construction)这个概念我是在这本书第一次看到，软件开发是一个复杂的过程，它包括以下活动

- 问题定义
- 需求开发
- 构建计划
- 软件架构
- 详细设计
- 编码和调试
- 单元测试
- 集成测试
- 集成
- 系统测试
- 修正维护

代码构建的核心是编码和调试，为了编码和调试，会或多或少牵涉到其他活动，非正式开发的时候，我们可能直接坐下来敲代码，上面的所有活动都打包了。而软件构建，讲的大概是敲代码的时候干的那些事情，你如果真的敲过代码，就知道大部分时间其实你是对着屏幕发呆状而不是在敲键盘（只有电影里的黑客才不听的噼里啪啦敲键盘），要做的事情包括

- 检查准备工作是否已经做好，可以安心敲代码了
- 想好如何测试代码
- 设计和实现类和函数
- 创建变量和命名常量
- 选择控制结构，组织语句
- 单元测试，集成测试，调试代码
- 相互Review代码
- 通过格式化和好的注释来打磨代码
- 集成分别开发的组件
- 修改代码使其运行更快占用资源更少

### 1.2 为什么软件构建重要？

- 软件构建是软件开发的主要活动——大部分时间都在码代码
- 软件构建是软件开发的中心活动——没有代码，再多的文档都是扯淡
- 关注软件构建可以极大提高每个程序员的生产力——大部分的程序员基本功不过关
- 软构建的产品——代码，经常是软件唯一精确的描述——文档都是骗人的
- 软件构建是唯一保证会做的工作——再懒也不能用PPT开发

### 1.3 如何阅读本书

作者说随意，我先从头到尾读一遍好了。

## 第2章 一些能更好理解软开发的隐喻

### 2.1 隐喻(Metaphors)的重要性

人类理解事物是从已知到未知的，作者举了科学史上很多例子说明metaphor的重要性，我觉得，能打好一个比方其实是很难的，善于打比方的人是最聪明的一类人，这可能需要大脑回路比较丰富才行。对一个事物理解越深刻，想出来的比喻就会越贴切，或者说模型就会越精确。

### 2.2 如何使用软件的隐喻

比喻不是算法，不会给出明确的指引，而是具有启发性的，会引导你思考的方向。

- 帮你洞察问题和处理
- 帮你找到更好的做事情的方式

### 2.3 一般的软件隐喻

#### 软件书写：写代码

写代码这个说法很常见，是借喻写文章而来的，这种借喻有很多不恰当的地方，比如代码更易于修改，基本上很难有“完成”的一天，代码不强调原创而强调复用。

基本上，这是一个糟糕的借喻，只对写很小的软件适用。

#### 软件农场：种植系统

软件系统确实有不断增长的一面，但却不是播了种子施肥浇水等收获的概念。

#### 软件牡蛎农场：系统增生

这个隐喻说的是渐进增强，像牡蛎一样，在沙粒上一层层裹碳酸钙，最后长成珍珠。这个概念近年来越来越火了，不单软件工程提，关于创业的理论也提。我个人的体会是：对需求不明的项目，一个基本的初步实现是讨论的基础，也是信心的来源。

#### 软件构建：建造软件

这是最重要的一个隐喻了，它源自建筑行业，开发软件和修建筑有很多相似点

- 复杂度和尺寸的影响很大
- 复用，而不是从头实现
- 个性化定制
- 好的规划能让后续细节的调整更容易
- 不同的项目使用不同的方法
- 越晚修改代价越大
- 对超大型项目，动手构建前的准备极为重要

#### 应用软件技术：智力工具箱

工具箱是一个很好的比喻，以免我们迷失在某个方法论或技术中，“拿个锤子，看什么都像钉子”，好的匠人，必然是有一个好的工具箱的，面对具体的情况，使用不同的工具。一个程序员应当不断扩充自己的工具箱。

#### 合成隐喻

隐喻是启发式的，只要有利于说明我们的问题，都没有必要拒绝。