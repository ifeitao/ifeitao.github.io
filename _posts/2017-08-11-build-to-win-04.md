---
5layout: post
title: 《构建之法》04：两人合作
categories: coding
---

### 第4章 两人合作

这一章讲两人合作，因为这是一个最小的合作单位。

#### 代码规范与设计规范

书中介绍了一些准则，大多是针对C++和C#的，我觉得不管什么语言，在做一个比较正式的软件时，都应该有规范，规范是什么样，倒不见得要和这本书说的一样。个人觉得规范除了统一风格外，还有两个作用。

1. 提供最佳实践：规范一般是有有经验的人制定的，这些经验往往都有血的教训，作为新手，首先应当不加思考的接受，然后才是思考为什么要如此，通过规范可以对具体的编程语言取精华弃糟粕；
2. 减轻思考负担：像我这种纠结的人，尤其是在接触一门新的语言的时候，会想成员变量应该怎么命名，括号要不要单独占一行，如果有一个规范，我就把主要精力放在问题本身上了。

#### 代码复审与结对编程

结对编程是代码复审的最高形式。代码复审或者结对编程是有效的，我觉得基于以下几个原因：

1. 人人都会犯错，与其等到出现bug才发现，不如早期通过其他人复核一下；
2. 如果把一个东西解释给人听，会强迫你做更加深入的思考；
3. 代码复审或者结对编程有点像教学，水平低的自然会收益，水平高的在讲解的过程中其实也会受益；
4. 类似于我拿到驾照刚开始开车上路时，找个老司机在副驾驶提醒我。

很遗憾最近几年类似的活动做得不多，最近的一次经验是帮同事重构代码，然后让他坐在后面给我解释他的代码的意图，但其实也收获很大，把一些设计原则将给别人听其实是自己的一次总结，也提高了通过代码读懂写代码的人的思路的能力。

#### 批评的三个层次

| 层次   | 内容      | 我的理解    | 被批评者的应对 |
| ---- | ------- | ------- | ------- |
| 最外层  | 行为和后果   | 就事论事    | 容易挽回局面  |
| 中间层  | 习惯和动机   | 新账旧账一起算 | 难以澄清    |
| 最内层  | 本质和固有属性 | 诛心      | 基本上没希望  |